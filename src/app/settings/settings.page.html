<ion-header [translucent]="true">
  <app-navigation-bar [title]="'Settings'"></app-navigation-bar>
</ion-header>

<ion-content [fullscreen]="true" [scrollY]="true">
  <div style="margin-bottom: 10rem">
    <div class="mt-3">
      <ion-grid>
        <ion-row>
          <ion-col>
            <h5 class="m-0"><strong>Profile</strong></h5>
          </ion-col>
          <ion-col class="ion-align-self-end">
            <ion-button [@loadingContent]="pageInitialized ? 'enter' : 'void'" *ngIf="pageInitialized" size="small" color="primary" fill="clear" class="text-sm ion-float-right m-0">
              Manage
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <div class="mb-4">
      <app-card [@loadingContent]="pageInitialized ? 'enter' : 'void'" *ngIf="pageInitialized"
        margin="2px 5px 5px 5px" 
        padding="5px">
        <ion-grid>
          <ion-row class="ion-justify-content-start">
            <ion-col size="3">
              <ion-avatar>
                <img alt="Silhouette of a person's head" src="https://ionicframework.com/docs/img/demos/avatar.svg" />
              </ion-avatar>
            </ion-col>
            <ion-col size="7">
              <p class="text-sm strong description">{{ userInformation?.firstname }} {{ userInformation?.lastname }}</p>
              <p class="pt-0 mt-2 text-xs light-text-color">{{ userInformation?.email }}</p>
            </ion-col>
          </ion-row>
        </ion-grid>
      </app-card>
      <app-card *ngIf="!pageInitialized"
        margin="2px 5px 5px 5px" 
        padding="5px">
        <ion-grid>
          <ion-row class="ion-justify-content-start">
            <ion-col size="3">
              <ion-avatar>
                <ion-skeleton-text class="round-loader-lg" [animated]="true"></ion-skeleton-text>
              </ion-avatar>
            </ion-col>
            <ion-col size="7">
              <ion-skeleton-text [animated]="true" style="width: 90%"></ion-skeleton-text>
              <ion-skeleton-text [animated]="true" style="width: 75%"></ion-skeleton-text>
            </ion-col>
          </ion-row>
        </ion-grid>
      </app-card>
    </div>

    <div class="mt-3">
      <ion-grid>
        <ion-row>
          <ion-col>
            <h5 class="m-0"><strong>Accounts</strong></h5>
          </ion-col>
          <ion-col class="ion-align-self-end">
            <ion-button [@loadingContent]="pageInitialized ? 'enter' : 'void'" *ngIf="pageInitialized" (click)="manageAccount()" size="small" color="primary" fill="clear" class="text-sm ion-float-right m-0">
              Add
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <div [@loadingContent]="pageInitialized ? 'enter' : 'void'" *ngIf="pageInitialized">
      <swiper
        [allowTouchMove]="true"
        direction="horizontal"
        [slidesPerView]="2"
        [pagination]="true">
        <ng-template *ngFor="let account of accounts" swiperSlide>
          <app-card
            margin="2px 5px 5px 5px" 
            padding="5px"
            (click)="handleAccountClick(account)">
            <ion-grid>
              <ion-row class="ion-justify-content-start">
                <ion-col class="ion-align-self-center mr-1" size="3">
                  <ion-icon [src]="'assets/icon/'+account?.icon+'.svg'" color="primary" class="text-lg"></ion-icon>
                </ion-col>
                <ion-col>
                  <p class="text-sm strong description ellipse" style="max-width: 5rem">{{ account.name }}</p>
                  <p class="pt-0 mt-2 text-xs light-text-color">{{ account?.type }}</p>
                </ion-col>
              </ion-row>
              <ion-row>
              </ion-row>
            </ion-grid>
          </app-card>
        </ng-template>
      </swiper>
    </div>

    <div *ngIf="!pageInitialized">
      <swiper
        [allowTouchMove]="false"
        direction="horizontal"
        [slidesPerView]="2"
        [pagination]="true">
          <ng-template *ngFor="let item of placeHolderData" swiperSlide>
            <app-card
              margin="2px 5px 5px 5px" 
              padding="5px">
              <ion-grid>
                <ion-row class="ion-justify-content-start">
                  <ion-col class="ion-align-self-center" size="3">
                    <ion-skeleton-text [animated]="true" style="width: 100%"></ion-skeleton-text>
                  </ion-col>
                  <ion-col></ion-col>
                  <ion-col size="8">
                    <ion-skeleton-text [animated]="true" style="width: 80%"></ion-skeleton-text>
                    <ion-skeleton-text [animated]="true" style="width: 40%"></ion-skeleton-text>
                  </ion-col>
                </ion-row>
                <ion-row>
              </ion-row>
            </ion-grid>
          </app-card>
        </ng-template>
      </swiper>
    </div>

    <div>
      <ion-grid>
        <ion-row>
          <ion-col>
            <h5 class=""><strong>Family</strong></h5>
          </ion-col>
          <ion-col class="ion-align-self-end">
            <ion-button [@loadingContent]="pageInitialized ? 'enter' : 'void'" *ngIf="pageInitialized" (click)="manageFamily()" size="small" color="primary" fill="clear" class="text-sm ion-float-right m-0">
              Add
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <div [@loadingContent]="pageInitialized ? 'enter' : 'void'" *ngIf="pageInitialized">
      <swiper
        [allowTouchMove]="true"
        direction="horizontal"
        [slidesPerView]="2"
        [pagination]="true">
        <ng-template *ngFor="let user of familyMembers" swiperSlide>
          <app-card
            margin="10px 5px 5px 5px" 
            padding="5px"
            (click)="editFamilyUser(user)">
            <ion-grid>
              <ion-row class="ion-justify-content-start">
                <ion-col class="ion-align-self-center mr-1" size="3">
                  <ion-avatar class="img-sm">
                    <img alt="Silhouette of a person's head" src="https://ionicframework.com/docs/img/demos/avatar.svg" />
                  </ion-avatar>
                </ion-col>
                <ion-col>
                  <p class="text-sm strong description ellipse" style="max-width: 5rem">{{ user?.label }}</p>
                  <p class="pt-0 mt-2 text-xs light-text-color ellipse" style="max-width: 5rem">{{ user?.email }}</p>
                </ion-col>
              </ion-row>
            </ion-grid>
          </app-card>
        </ng-template>
      </swiper>
    </div>

    <div *ngIf="!pageInitialized">
      <swiper
        [allowTouchMove]="false"
        direction="horizontal"
        [slidesPerView]="2"
        [pagination]="true">
          <ng-template *ngFor="let item of placeHolderData" swiperSlide>
            <app-card
              margin="2px 5px 5px 5px" 
              padding="5px">
              <ion-grid>
                <ion-row class="ion-justify-content-start">
                  <ion-col class="ion-align-self-center" size="3">
                    <ion-skeleton-text [animated]="true" style="width: 100%"></ion-skeleton-text>
                  </ion-col>
                  <ion-col></ion-col>
                  <ion-col size="8">
                    <ion-skeleton-text [animated]="true" style="width: 80%"></ion-skeleton-text>
                    <ion-skeleton-text [animated]="true" style="width: 40%"></ion-skeleton-text>
                  </ion-col>
                </ion-row>
                <ion-row>
              </ion-row>
            </ion-grid>
          </app-card>
        </ng-template>
      </swiper>
    </div>

    <div>
      <ion-grid>
        <ion-row>
          <ion-col>
            <h5 class=""><strong>Categories</strong></h5>
          </ion-col>
          <ion-col class="ion-align-self-end">
            <ion-button [@loadingContent]="pageInitialized ? 'enter' : 'void'" *ngIf="pageInitialized" (click)="manageCategory()" size="small" color="primary" fill="clear" class="text-sm ion-float-right m-0">
              Add
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <div [@loadingContent]="pageInitialized ? 'enter' : 'void'" class="pb-5" *ngIf="pageInitialized">
      <swiper
        [allowTouchMove]="true"
        direction="horizontal"
        [slidesPerView]="2"
        [pagination]="true">
        <ng-template *ngFor="let item of categories" swiperSlide>
          <app-card
            margin="10px 5px 5px 5px" 
            padding="5px"
            (click)="manageCategory(item)">
            <ion-grid>
              <ion-row class="ion-justify-content-start">
                <ion-col class="ion-align-self-center mr-3" size="2">
                  <ion-icon style="vertical-align: middle;" class="text-lg" [src]="'assets/icon/'+item?.icon+'.svg'" color="primary"></ion-icon>
                </ion-col>
                <ion-col>
                  <p class="strong text-sm pb-0 mb-0">{{ item?.name }}</p>
                </ion-col>
              </ion-row>
              <ion-row>
              </ion-row>
            </ion-grid>
          </app-card>
        </ng-template>
      </swiper>
    </div>
    <div class="pb-5" *ngIf="!pageInitialized">
      <swiper
        [allowTouchMove]="false"
        direction="horizontal"
        [slidesPerView]="2"
        [pagination]="true">
          <ng-template *ngFor="let item of placeHolderData" swiperSlide>
            <app-card
              margin="2px 5px 5px 5px" 
              padding="5px">
              <ion-grid>
                <ion-row class="ion-justify-content-start">
                  <ion-col class="ion-align-self-center" size="3">
                    <ion-skeleton-text [animated]="true" style="width: 100%"></ion-skeleton-text>
                  </ion-col>
                  <ion-col></ion-col>
                  <ion-col size="8">
                    <ion-skeleton-text [animated]="true" style="width: 80%"></ion-skeleton-text>
                    <ion-skeleton-text [animated]="true" style="width: 40%"></ion-skeleton-text>
                  </ion-col>
                </ion-row>
                <ion-row>
              </ion-row>
            </ion-grid>
          </app-card>
        </ng-template>
      </swiper>
    </div>

    <!--implement-->
    <!-- <div class="button-group mb-3 mt-5">
      <ion-button 
        class="shadow" 
        type="submit" 
        expand="block" 
        shape="round" 
        size="large">Terms of Service</ion-button>
    </div>

    <div class="button-group mb-3 mt-2">
      <ion-button 
        class="shadow" 
        type="submit" 
        expand="block" 
        shape="round" 
        size="large">Feedback</ion-button>
    </div> -->

    <div class="button-group mb-3 mt-2">
      <ion-button 
        class="shadow" 
        type="submit" 
        expand="block" 
        shape="round" 
        size="large"
        (click)="logout()">Logout</ion-button>
    </div>
  </div>

  <app-add-family #addFam
    (onConfirm)="onFamilyConfirm($event)"
    (onRemove)="onFamilyRemove($event)"></app-add-family>
</ion-content>
