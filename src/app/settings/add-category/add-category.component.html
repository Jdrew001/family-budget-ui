<ion-header [translucent]="true" class="mb-1">
  <ion-toolbar style="--border-style: none !important;">
    <ion-grid>
      <ion-row>
        <ion-col>
          <h5 class="text-left strong">Manage Category</h5>
        </ion-col>
      </ion-row>
    </ion-grid>
    
    <ion-buttons (click)="closeCategoryPopup()" class="mr-5" slot="end">
      <ion-icon class="text-md pt-3 strong" name="close-outline"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content #ionContent [scrollY]="true" [formGroup]="formGroup">
  <div style="margin-bottom: 10rem">
    <ion-grid>
      <ion-row>
        <ion-col>
          <div class="input-group mt-4 mb-1">
            <div class="group mb-0">
              <ion-label position="stacked">Category Name</ion-label>
                <ion-input formControlName="categoryName" placeholder="Provide Name">
                  <ion-icon *ngIf="(categoryName.dirty || categoryName.touched) && !categoryName.errors" class="correct" name="checkmark-circle" item-right></ion-icon>
                  <ion-icon *ngIf="(categoryName.dirty || categoryName.touched) && categoryName.errors" class="incorrect" name="close-circle" item-right></ion-icon>
                </ion-input>
            </div>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-label position="stacked">Category Type</ion-label>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <app-card 
            (click)="categoryTypeSelected(0)" 
            [active]="categoryType == 0"
            margin="10px 5px 5px 5px" 
            padding="5px">
            <ion-list lines="none">
              <ion-item>
                <ion-icon nclass="text-lg" [src]="'assets/icon/profit.svg'" color="primary"></ion-icon>
                <ion-label class="strong text-xs pl-3 pb-0" color="primary">Income <br> Categories</ion-label>
              </ion-item>
            </ion-list>
          </app-card>
        </ion-col>
        <ion-col>
          <app-card
            (click)="categoryTypeSelected(1)" 
            [active]="categoryType == 1"
            margin="10px 5px 5px 5px" 
            padding="5px">
            <ion-list lines="none">
              <ion-item>
                <ion-icon class="text-lg" [src]="'assets/icon/expense.svg'" color="primary"></ion-icon>
                <ion-label class="strong text-xs pl-3 pb-0" color="primary">Expense <br> Categories</ion-label>
              </ion-item>
            </ion-list>
          </app-card>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <div class="input-group mt-3 mb-1">
            <div class="group mb-0">
              <ion-label position="stacked">Icon</ion-label>
              <div (click)="chooseIcon()" class="input-lookalike">
                <p *ngIf="!icon?.value" class="placeholder">Select Icon</p>
                <p *ngIf="icon?.value">
                  <ion-icon style="vertical-align: middle;" class="text-lg" [src]="'assets/icon/'+icon?.value+'.svg'" color="primary"></ion-icon>
                </p>
              </div>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>

    <div class="button-group mb-3 mt-5">
      <ion-button 
        class="shadow" 
        type="submit" 
        expand="block" 
        shape="round" 
        size="large"
        >Confirm</ion-button>
    </div>

  </div>

  <app-icon-field #iconField
    title="Category Icon"
    [icon]="icon?.value"
    (iconSelected$)="onIconSelected($event)"></app-icon-field>
</ion-content>